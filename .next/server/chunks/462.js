exports.id=462,exports.ids=[462],exports.modules={4380:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4380,e.exports=t},991:(e,t,r)=>{"use strict";let{Transform:s,PassThrough:i}=r(2781),o=r(9796),n=r(5830);e.exports=e=>{let t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;let r="br"===t;if(r&&"function"!=typeof o.createBrotliDecompress)return e.destroy(Error("Brotli is not supported on Node.js < 12")),e;let a=!0,h=new s({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),l=new i({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),c=r?o.createBrotliDecompress():o.createUnzip();return c.once("error",t=>{if(a&&!e.readable){l.end();return}l.destroy(t)}),n(e,l),e.pipe(h).pipe(c).pipe(l),l}},5830:e=>{"use strict";let t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,r)=>{if(r._readableState.autoDestroy)throw Error("The second stream must have the `autoDestroy` option set to `false`");let s=new Set(Object.keys(e).concat(t)),i={};for(let t of s)t in r||(i[t]={get(){let r=e[t];return"function"==typeof r?r.bind(e):r},set(r){e[t]=r},enumerable:!0,configurable:!1});return Object.defineProperties(r,i),e.once("aborted",()=>{r.destroy(),r.emit("aborted")}),e.once("close",()=>{e.complete&&r.readable?r.once("end",()=>{r.emit("close")}):r.emit("close")}),r}},7300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=(e,t)=>{let r;let s="function"==typeof(r="function"==typeof t?{connect:t}:t).connect,i="function"==typeof r.secureConnect,o="function"==typeof r.close,n=()=>{s&&r.connect(),e.encrypted&&i&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),o&&e.once("close",r.close)};e.writable&&!e.connecting?n():e.connecting?e.once("connect",n):e.destroyed&&o&&r.close(e._hadError)};t.default=r,e.exports=r,e.exports.default=r},2737:(e,t,r)=>{"use strict";let{PassThrough:s}=r(2781);e.exports=e=>{let{array:t}=e={...e},{encoding:r}=e,i="buffer"===r,o=!1;t?o=!(r||i):r=r||"utf8",i&&(r=null);let n=new s({objectMode:o});r&&n.setEncoding(r);let a=0,h=[];return n.on("data",e=>{h.push(e),o?a=h.length:a+=e.length}),n.getBufferedValue=()=>t?h:i?Buffer.concat(h,a):h.join(""),n.getBufferedLength=()=>a,n}},8621:(e,t,r)=>{"use strict";let{constants:s}=r(4300),i=r(2781),{promisify:o}=r(3837),n=r(2737),a=o(i.pipeline);class h extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function l(e,t){if(!e)throw Error("Expected a stream");let{maxBuffer:r}=t={maxBuffer:1/0,...t},i=n(t);return await new Promise((t,o)=>{let n=e=>{e&&i.getBufferedLength()<=s.MAX_LENGTH&&(e.bufferedData=i.getBufferedValue()),o(e)};(async()=>{try{await a(e,i),t()}catch(e){n(e)}})(),i.on("data",()=>{i.getBufferedLength()>r&&n(new h)})}),i.getBufferedValue()}e.exports=l,e.exports.buffer=(e,t)=>l(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>l(e,{...t,array:!0}),e.exports.MaxBufferError=h},2988:e=>{"use strict";let t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s=new Set([500,502,503,504]),i={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},o={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function n(e){let t=parseInt(e,10);return isFinite(t)?t:0}function a(e){let t={};if(!e)return t;for(let r of e.trim().split(/,/)){let[e,s]=r.split(/=/,2);t[e.trim()]=void 0===s||s.trim().replace(/^"|"$/g,"")}return t}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:n}={}){if(n){this._fromObject(n);return}if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._ignoreCargoCult=!!o,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==i?i:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),this._ignoreCargoCult&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":function(e){let t=[];for(let r in e){let s=e[r];t.push(!0===s?r:r+"="+s)}if(t.length)return t.join(", ")}(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())&&r.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return!!(this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires)}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){return!this.evaluateRequest(e).revalidation}_evaluateRequestHitResult(e){return{response:{headers:this.responseHeaders()},revalidation:e}}_evaluateRequestRevalidation(e,t){return{synchronous:t,headers:this.revalidationHeaders(e)}}_evaluateRequestMissResult(e){return{response:void 0,revalidation:this._evaluateRequestRevalidation(e,!0)}}evaluateRequest(e){if(this._assertRequestHasHeaders(e),this._rescc["must-revalidate"]||!this._requestMatches(e,!1))return this._evaluateRequestMissResult(e);let t=a(e.headers["cache-control"]);return t["no-cache"]||/no-cache/.test(e.headers.pragma)||t["max-age"]&&this.age()>n(t["max-age"])||t["min-fresh"]&&this.maxAge()-this.age()<n(t["min-fresh"])?this._evaluateRequestMissResult(e):this.stale()?"max-stale"in t&&(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())?this._evaluateRequestHitResult(void 0):this.useStaleWhileRevalidate()?this._evaluateRequestHitResult(this._evaluateRequestRevalidation(e,!1)):this._evaluateRequestMissResult(e):this._evaluateRequestHitResult(void 0)}_requestMatches(e,t){return!!((!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e))}_allowsStoringAuthenticated(){return!!(this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"])}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;for(let t of this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/))if(e.headers[t]!==this._reqHeaders[t])return!1;return!0}_copyWithoutHopByHopHeaders(e){let t={};for(let r in e)i[r]||(t[r]=e[r]);if(e.connection)for(let r of e.connection.trim().split(/\s*,\s*/))delete t[r];if(t.warning){let e=t.warning.split(/,/).filter(e=>!/^\s*1[0-9][0-9]/.test(e));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return n(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||"*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return n(this._rescc["s-maxage"])}if(this._rescc["max-age"])return n(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){let r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){let r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),t=e+n(this._rescc["stale-if-error"]),r=e+n(this._rescc["stale-while-revalidate"]);return Math.round(1e3*Math.max(0,e,t,r))}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+n(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){let e=n(this._rescc["stale-while-revalidate"]);return e>0&&this.maxAge()+e>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._ignoreCargoCult=!!e.icc,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,icc:this._ignoreCargoCult,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){let e=t["if-none-match"].split(/,/).filter(e=>!/^\s*W\//.test(e));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&(!t||s.has(t.status)))return{policy:this,modified:!1,matches:!0};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0);let i={shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl,ignoreCargoCult:this._ignoreCargoCult};if(!r)return{policy:new this.constructor(e,t,i),modified:304!=t.status,matches:!1};let n={};for(let e in this._resHeaders)n[e]=e in t.headers&&!o[e]?t.headers[e]:this._resHeaders[e];let a=Object.assign({},t,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,a,i),modified:!1,matches:!0}}}},8755:(e,t,r)=>{"use strict";let{URL:s}=r(7310),i=r(2361),o=r(4404),n=r(5158),a=r(4524),h=r(500),l=Symbol("currentStreamCount"),c=Symbol("request"),u=Symbol("cachedOriginSet"),d=Symbol("gracefullyClosing"),p=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(e,t,r)=>{let s=0,i=e.length;for(;s<i;){let o=s+i>>>1;r(e[o],t)?s=o+1:i=o}return s},y=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,g=(e,t)=>{for(let r=0;r<e.length;r++){let s=e[r];s[u].length>0&&s[u].length<t[u].length&&s[u].every(e=>t[u].includes(e))&&s[l]+t[l]<=t.remoteSettings.maxConcurrentStreams&&_(s)}},b=(e,t)=>{for(let r=0;r<e.length;r++){let s=e[r];if(t[u].length>0&&t[u].length<s[u].length&&t[u].every(e=>s[u].includes(e))&&t[l]+s[l]<=s.remoteSettings.maxConcurrentStreams)return _(t),!0}return!1},_=e=>{e[d]=!0,0===e[l]&&e.close()};class v extends i{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:r=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxEmptySessions=r,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let r=0;r<f.length;r++){let s=f[r];t+=":",e&&void 0!==e[s]&&(t+=e[s])}return t}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let t in this.queue[e]){let r=this.queue[e][t];r.completed||(r.completed=!0,r())}}_isBetterSession(e,t){return e>t}_accept(e,t,r,s){let i=0;for(;i<t.length&&e[l]<e.remoteSettings.maxConcurrentStreams;)t[i].resolve(e),i++;t.splice(0,i),t.length>0&&(this.getSession(r,s,t),t.length=0)}getSession(e,t,r){return new Promise((i,o)=>{Array.isArray(r)&&r.length>0?(r=[...r],i()):r=[{resolve:i,reject:o}];try{if("string"==typeof e)e=new s(e);else if(!(e instanceof s))throw TypeError("The `origin` argument needs to be a string or an URL object");if(t){let{servername:r}=t,{hostname:s}=e;if(r&&s!==r)throw Error(`Origin ${s} differs from servername ${r}`)}}catch(e){for(let t=0;t<r.length;t++)r[t].reject(e);return}let a=this.normalizeOptions(t),h=e.origin;if(a in this.sessions){let e;let s=this.sessions[a],i=-1,o=-1;for(let t=0;t<s.length;t++){let r=s[t],n=r.remoteSettings.maxConcurrentStreams;if(n<i)break;if(!r[u].includes(h))continue;let a=r[l];a>=n||r[d]||r.destroyed||(e||(i=n),this._isBetterSession(a,o)&&(e=r,o=a))}if(e){this._accept(e,r,h,t);return}}if(a in this.queue){if(h in this.queue[a]){this.queue[a][h].listeners.push(...r);return}}else this.queue[a]={[p]:0};let f=()=>{a in this.queue&&this.queue[a][h]===_&&(delete this.queue[a][h],0==--this.queue[a][p]&&delete this.queue[a])},_=async()=>{let s;this._sessionCount++;let i=`${h}:${a}`,o=!1;try{let v={...t};void 0===v.settings&&(v.settings=this.settings),void 0===v.session&&(v.session=this.tlsSessionCache.get(i));let w=v.createConnection||this.createConnection;s=await w.call(this,e,v),v.createConnection=()=>s;let S=n.connect(e,v);S[l]=0,S[d]=!1;let E=()=>{let e;let{socket:t}=S;return!1===t.servername?(t.servername=t.remoteAddress,e=S.originSet,t.servername=!1):e=S.originSet,e},x=()=>S[l]<S.remoteSettings.maxConcurrentStreams;S.socket.once("session",e=>{this.tlsSessionCache.set(i,e)}),S.once("error",e=>{for(let t=0;t<r.length;t++)r[t].reject(e);this.tlsSessionCache.delete(i)}),S.setTimeout(this.timeout,()=>{S.destroy()}),S.once("close",()=>{if(this._sessionCount--,o){this._emptySessionCount--;let e=this.sessions[a];1===e.length?delete this.sessions[a]:e.splice(e.indexOf(S),1)}else{f();let e=Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<r.length;t++)r[t].reject(e)}this._processQueue()});let k=()=>{let e=this.queue[a];if(!e)return;let t=S[u];for(let r=0;r<t.length;r++){let s=t[r];if(s in e){let{listeners:t,completed:r}=e[s],i=0;for(;i<t.length&&x();)t[i].resolve(S),i++;if(e[s].listeners.splice(0,i),0===e[s].listeners.length&&!r&&(delete e[s],0==--e[p])){delete this.queue[a];break}if(!x())break}}};S.on("origin",()=>{S[u]=E()||[],S[d]=!1,b(this.sessions[a],S),!S[d]&&x()&&(k(),x()&&g(this.sessions[a],S))}),S.once("remoteSettings",()=>{if(_.destroyed){let e=Error("Agent has been destroyed");for(let t=0;t<r.length;t++)r[t].reject(e);S.destroy();return}if(S.setLocalWindowSize&&S.setLocalWindowSize(4194304),S[u]=E()||[],S.socket.encrypted){let e=S[u][0];if(e!==h){let t=Error(`Requested origin ${h} does not match server ${e}`);for(let e=0;e<r.length;e++)r[e].reject(t);S.destroy();return}}f();{let e=this.sessions;if(a in e){let t=e[a];t.splice(m(t,S,y),0,S)}else e[a]=[S]}o=!0,this._emptySessionCount++,this.emit("session",S),this._accept(S,r,h,t),0===S[l]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),S.on("remoteSettings",()=>{x()&&(k(),x()&&g(this.sessions[a],S))})}),S[c]=S.request,S.request=(e,t)=>{if(S[d])throw Error("The session is gracefully closing. No new streams are allowed.");let r=S[c](e,t);return S.ref(),0==S[l]++&&this._emptySessionCount--,r.once("close",()=>{if(0==--S[l]&&(this._emptySessionCount++,S.unref(),this._emptySessionCount>this.maxEmptySessions||S[d])){S.close();return}!S.destroyed&&!S.closed&&x()&&!b(this.sessions[a],S)&&(g(this.sessions[a],S),k(),0===S[l]&&this._processQueue())}),r}}catch(e){f(),this._sessionCount--;for(let t=0;t<r.length;t++)r[t].reject(e)}};_.listeners=r,_.completed=!1,_.destroyed=!1,this.queue[a][h]=_,this.queue[a][p]++,this._processQueue()})}request(e,t,r,s){return new Promise((i,o)=>{this.getSession(e,t,[{reject:o,resolve:e=>{try{let t=e.request(r,s);h(t),i(t)}catch(e){o(e)}}}])})}async createConnection(e,t){return v.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];let r=e.port||443,s=e.hostname;void 0===t.servername&&(t.servername=s);let i=o.connect(r,s,t);return t.socket&&(i._peername={family:void 0,address:void 0,port:r}),i}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0,{sessions:r}=this;for(let s in r){let i=r[s];for(let r=0;r<i.length;r++){let s=i[r];if(0===s[l]&&(t++,s.close(),t>=e))return t}}return t}destroy(e){let{sessions:t,queue:r}=this;for(let r in t){let s=t[r];for(let t=0;t<s.length;t++)s[t].destroy(e)}for(let e in r){let t=r[e];for(let e in t)t[e].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}v.kCurrentStreamCount=l,v.kGracefullyClosing=d,e.exports={Agent:v,globalAgent:new v}},5056:(e,t,r)=>{"use strict";let{URL:s,urlToHttpOptions:i}=r(7310),o=r(3685),n=r(5687),a=r(9403),h=r(4524),{Agent:l,globalAgent:c}=r(8755),u=r(2927),d=r(4602),p=r(500),f=new h({maxSize:100}),m=new Map,y=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};let s=()=>{e.emit("free",t,r)};t.on("free",s);let i=()=>{e.removeSocket(t,r)};t.on("close",i);let o=()=>{let{freeSockets:r}=e;for(let e of Object.values(r))if(e.includes(t)){t.destroy();return}};t.on("timeout",o);let n=()=>{e.removeSocket(t,r),t.off("close",i),t.off("free",s),t.off("timeout",o),t.off("agentRemove",n)};t.on("agentRemove",n),e.emit("free",t,r)},g=(e,t=new Map,r)=>async s=>{let i=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!e.has(i)){if(t.has(i))return{alpnProtocol:(await t.get(i)).alpnProtocol};let{path:o}=s;s.path=s.socketPath;let n=a(s,r);t.set(i,n);try{let r=await n;return e.set(i,r.alpnProtocol),t.delete(i),s.path=o,r}catch(e){throw t.delete(i),s.path=o,e}}return{alpnProtocol:e.get(i)}},b=g(f,m);e.exports=async(e,t,r)=>{if(e="string"==typeof e?i(new s(e)):e instanceof s?i(e):{...e},"function"==typeof t||void 0===t?(r=t,t=e):t=Object.assign(e,t),t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"],!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";let a="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||d(t.headers&&t.headers.host||t.host),t.port=t.port||(a?443:80),t._defaultAgent=a?n.globalAgent:o.globalAgent;let h=t.resolveProtocol||b,{agent:f}=t;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){t.resolveSocket=!0;let{socket:e,alpnProtocol:s,timeout:i}=await h(t);if(i){e&&e.destroy();let r=Error(`Timed out resolving ALPN: ${t.timeout} ms`);throw r.code="ETIMEDOUT",r.ms=t.timeout,r}e&&t.createConnection&&(e.destroy(),e=void 0),delete t.resolveSocket;let o="h2"===s;if(f&&(f=o?f.http2:f.https,t.agent=f),void 0===f&&(f=o?c:n.globalAgent),e){if(!1===f)e.destroy();else{let r=(o?l:n.Agent).prototype.createConnection;f.createConnection===r?o?t._reuseSocket=e:y(f,e,t):e.destroy()}}if(o)return p(new u(t,r))}else f&&(t.agent=f.http);return t.headers&&(t.headers={...t.headers},t.headers[":authority"]&&(t.headers.host||(t.headers.host=t.headers[":authority"]),delete t.headers[":authority"]),delete t.headers[":method"],delete t.headers[":scheme"],delete t.headers[":path"]),p(o.request(t,r))},e.exports.protocolCache=f,e.exports.resolveProtocol=b,e.exports.createResolveProtocol=g},2927:(e,t,r)=>{"use strict";let{URL:s,urlToHttpOptions:i}=r(7310),o=r(5158),{Writable:n}=r(2781),{Agent:a,globalAgent:h}=r(8755),l=r(312),c=r(1565),{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:p}=r(9442),f=r(2056),m=r(1251),y=r(9343),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:_,HTTP2_HEADER_AUTHORITY:v,HTTP2_METHOD_CONNECT:w}=o.constants,S=Symbol("headers"),E=Symbol("origin"),x=Symbol("session"),k=Symbol("options"),O=Symbol("flushedHeaders"),C=Symbol("jobs"),R=Symbol("pendingAgentPromise");class P extends n{constructor(e,t,r){if(super({autoDestroy:!1,emitClose:!1}),e="string"==typeof e?i(new s(e)):e instanceof s?i(e):{...e},"function"==typeof t||void 0===t?(r=t,t=e):t=Object.assign(e,t),t.h2session){if(this[x]=t.h2session,this[x].destroyed)throw Error("The session has been closed already");this.protocol=this[x].socket.encrypted?"https:":"http:"}else if(!1===t.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===t.agent||null===t.agent)this.agent=h;else if("function"==typeof t.agent.request)this.agent=t.agent;else throw new u("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent);if(this.agent&&(this.protocol=this.agent.protocol),t.protocol&&t.protocol!==this.protocol)throw new d(t.protocol,this.protocol);t.port||(t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443),t.host=t.hostname||t.host||"localhost",delete t.hostname;let{timeout:o}=t;t.timeout=void 0,this[S]=Object.create(null),this[C]=[],this[R]=void 0,this.socket=null,this.connection=null,this.method=t.method||"GET","CONNECT"===this.method&&("/"===t.path||void 0===t.path)||(this.path=t.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:n}=t;if(n)for(let e in n)this.setHeader(e,n[e]);!t.auth||"authorization"in this[S]||(this[S].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[k]=t,this[E]=new s(`${this.protocol}//${t.servername||t.host}:${t.port}`);let l=t._reuseSocket;l&&(t.createConnection=(...e)=>l.destroyed?this.agent.createConnection(...e):l,this.agent.getSession(this[E],this[k]).catch(()=>{})),o&&this.setTimeout(o),r&&this.once("response",r),this[O]=!1}get method(){return this[S][b]}set method(e){e&&(this[S][b]=e.toUpperCase())}get path(){let e="CONNECT"===this.method?v:_;return this[S][e]}set path(e){if(e){let t="CONNECT"===this.method?v:_;this[S][t]=e}}get host(){return this[E].hostname}set host(e){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody){r(Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let s=()=>this._request.write(e,t,r);this._request?s():this[C].push(s)}_final(e){this.flushHeaders();let t=()=>{if(this._mustNotHaveABody||"CONNECT"===this.method){e();return}this._request.end(e)};this._request?t():this[C].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,t){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[R]}catch(t){this.aborted&&(e=t)}t(e)}async flushHeaders(){if(this[O]||this.destroyed)return;this[O]=!0;let e=this.method===w,t=t=>{if(this._request=t,this.destroyed){t.destroy();return}e||c(t,this,["timeout","continue"]),t.once("error",e=>{this.destroy(e)}),t.once("aborted",()=>{let{res:e}=this;e?(e.aborted=!0,e.emit("aborted"),e.destroy()):this.destroy(Error("The server aborted the HTTP/2 stream"))});let r=(r,s,i)=>{let o=new l(this.socket,t.readableHighWaterMark);this.res=o,o.url=`${this[E].origin}${this.path}`,o.req=this,o.statusCode=r[g],o.headers=r,o.rawHeaders=i,o.once("end",()=>{o.complete=!0,o.socket=null,o.connection=null}),e?(o.upgrade=!0,this.emit("connect",o,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",e=>{o._dumped||o.push(e)||t.pause()}),t.once("end",()=>{this.aborted||o.push(null)}),this.emit("response",o)||o._dump())};for(let e of(t.once("response",r),t.once("headers",e=>this.emit("information",{statusCode:e[g]})),t.once("trailers",(e,t,s)=>{let{res:i}=this;if(null===i){r(e,t,s);return}i.trailers=e,i.rawTrailers=s}),t.once("close",()=>{let{aborted:e,res:t}=this;if(t){e&&(t.aborted=!0,t.emit("aborted"),t.destroy());let r=()=>{t.emit("close"),this.destroy(),this.emit("close")};t.readable?t.once("end",r):r();return}if(!this.destroyed){this.destroy(Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(t,y),this[C]))e();this[C].length=0,this.emit("socket",this.socket)};if(v in this[S]||e||(this[S][v]=this[E].host),this[x])try{t(this[x].request(this[S]))}catch(e){this.destroy(e)}else{this.reusedSocket=!0;try{let e=this.agent.request(this[E],this[k],this[S]);this[R]=e,t(await e),this[R]=!1}catch(e){this[R]=!1,this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[S])}hasHeader(e){if("string"!=typeof e)throw new u("name","string",e);return!!this[S][e.toLowerCase()]}getHeader(e){if("string"!=typeof e)throw new u("name","string",e);return this[S][e.toLowerCase()]}get headersSent(){return this[O]}removeHeader(e){if("string"!=typeof e)throw new u("name","string",e);if(this.headersSent)throw new p("remove");delete this[S][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new p("set");f(e),m(e,t);let r=e.toLowerCase();if("connection"===r){if("keep-alive"===t.toLowerCase())return;throw Error(`Invalid 'connection' header: ${t}`)}"host"===r&&"CONNECT"===this.method?this[S][v]=t:this[S][r]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){let r=()=>this._request.setTimeout(e,t);return this._request?r():this[C].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}e.exports=P},312:(e,t,r)=>{"use strict";let{Readable:s}=r(2781);class i extends s{constructor(e,t){super({emitClose:!1,autoDestroy:!0,highWaterMark:t}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){this.readableEnded||(this.aborted=!0),t(),this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}e.exports=i},7484:(e,t,r)=>{"use strict";let s=r(5158),{Agent:i,globalAgent:o}=r(8755),n=r(2927),a=r(312),h=r(5056),{HttpOverHttp2:l,HttpsOverHttp2:c}=r(5069),u=r(8669),{Http2OverHttp:d,Http2OverHttps:p}=r(3280),f=r(2056),m=r(1251);e.exports={...s,ClientRequest:n,IncomingMessage:a,Agent:i,globalAgent:o,request:(e,t,r)=>new n(e,t,r),get:(e,t,r)=>{let s=new n(e,t,r);return s.end(),s},auto:h,proxies:{HttpOverHttp2:l,HttpsOverHttp2:c,Http2OverHttp2:u,Http2OverHttp:d,Http2OverHttps:p},validateHeaderName:f,validateHeaderValue:m}},6450:e=>{"use strict";e.exports=e=>{let{username:t,password:r}=e.proxyOptions.url;if(t||r){let e=`${t}:${r}`,s=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}},5069:(e,t,r)=>{"use strict";let s=r(4404),i=r(3685),o=r(5687),n=r(681),{globalAgent:a}=r(8755),h=r(1380),l=r(4685),c=r(6450),u=(e,t,r)=>{(async()=>{try{let{proxyOptions:i}=e,{url:l,headers:u,raw:d}=i,p=await a.request(l,i,{...c(e),...u,":method":"CONNECT",":authority":`${t.host}:${t.port}`});p.once("error",r),p.once("response",i=>{let a=i[":status"];if(200!==a){r(new h(a,""));return}let l=e instanceof o.Agent;if(d&&l){t.socket=p;let e=s.connect(t);e.once("close",()=>{p.destroy()}),r(null,e);return}let c=new n(p);c.encrypted=!1,c._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},r(null,c)})}catch(e){r(e)}})()};class d extends i.Agent{constructor(e){super(e),l(this,e.proxyOptions)}createConnection(e,t){u(this,e,t)}}class p extends o.Agent{constructor(e){super(e),l(this,e.proxyOptions)}createConnection(e,t){u(this,e,t)}}e.exports={HttpOverHttp2:d,HttpsOverHttp2:p}},3280:(e,t,r)=>{"use strict";let s=r(3685),i=r(5687),o=r(693),n=r(6450),a=e=>new Promise((t,r)=>{e.once("error",r),e.once("connect",(s,i,o)=>{i.unshift(o),e.off("error",r),t([i,s.statusCode,s.statusMessage])})});class h extends o{async _getProxyStream(e){let{proxyOptions:t}=this,{url:r,headers:o}=this.proxyOptions;return a(("https:"===r.protocol?i:s).request({...t,hostname:r.hostname,port:r.port,path:e,headers:{...n(this),...o,host:e},method:"CONNECT"}).end())}}e.exports={Http2OverHttp:h,Http2OverHttps:h}},8669:(e,t,r)=>{"use strict";let{globalAgent:s}=r(8755),i=r(693),o=r(6450),n=e=>new Promise((t,r)=>{e.once("error",r),e.once("response",s=>{e.off("error",r),t(s[":status"])})});class a extends i{async _getProxyStream(e){let{proxyOptions:t}=this,r={...o(this),...t.headers,":method":"CONNECT",":authority":e},i=await s.request(t.url,t,r),a=await n(i);return[i,a,""]}}e.exports=a},693:(e,t,r)=>{"use strict";let{Agent:s}=r(8755),i=r(681),o=r(1380),n=r(4685);class a extends s{constructor(e){super(e),n(this,e.proxyOptions)}async createConnection(e,t){let r=`${e.hostname}:${e.port||443}`,[s,n,a]=await this._getProxyStream(r);if(200!==n)throw new o(n,a);if(this.proxyOptions.raw)t.socket=s;else{let e=new i(s);return e.encrypted=!1,e._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},e}return super.createConnection(e,t)}}e.exports=a},4685:(e,t,r)=>{"use strict";let{URL:s}=r(7310),i=r(5510);e.exports=(e,t)=>{i("proxyOptions",t,["object"]),i("proxyOptions.headers",t.headers,["object","undefined"]),i("proxyOptions.raw",t.raw,["boolean","undefined"]),i("proxyOptions.url",t.url,[s,"string"]);let r=new s(t.url);e.proxyOptions={raw:!0,...t,headers:{...t.headers},url:r}}},1380:e=>{"use strict";class t extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`),this.statusCode=e,this.statusMessage=t}}e.exports=t},4602:(e,t,r)=>{"use strict";let{isIP:s}=r(1808),i=r(9491),o=e=>{if("["===e[0]){let t=e.indexOf("]");return i(-1!==t),e.slice(1,t)}let t=e.indexOf(":");return -1===t?e:e.slice(0,t)};e.exports=e=>{let t=o(e);return s(t)?"":t}},5510:e=>{"use strict";e.exports=(e,t,r)=>{if(!r.some(e=>"string"==typeof e?typeof t===e:t instanceof e)){let s=r.map(e=>"string"==typeof e?e:e.name);throw TypeError(`Expected '${e}' to be a type of ${s.join(" or ")}, got ${typeof t}`)}}},500:e=>{"use strict";e.exports=e=>{if(0!==e.listenerCount("error"))return e;e.__destroy=e._destroy,e._destroy=(...t)=>{let r=t.pop();e.__destroy(...t,async e=>{await Promise.resolve(),r(e)})};let t=t=>{Promise.resolve().then(()=>{e.emit("error",t)})};return e.once("error",t),Promise.resolve().then(()=>{e.off("error",t)}),e}},9442:e=>{"use strict";let t=(t,r,s)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof s?s:s(e)),this.name=`${super.name} [${r}]`,this.code=r}}};t(TypeError,"ERR_INVALID_ARG_TYPE",e=>{let t=e[0].includes(".")?"property":"argument",r=e[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`}),t(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`),t(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`),t(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`),t(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`),t(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},2099:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},681:(e,t,r)=>{"use strict";let s=r(2781),i=new(r(4404)).TLSSocket(new s.PassThrough)._handle._parentWrap.constructor;e.exports=i},1565:e=>{"use strict";e.exports=(e,t,r)=>{for(let s of r)e.on(s,(...e)=>t.emit(s,...e))}},9343:(e,t,r)=>{"use strict";let{ERR_HTTP2_NO_SOCKET_MANIPULATION:s}=r(9442);e.exports={has(e,t){let r=void 0===e.session?e:e.session.socket;return t in e||t in r},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":if(e.destroyed)return!1;return e.readable;case"setTimeout":{let{session:t}=e;if(void 0!==t)return t.setTimeout.bind(t);return e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new s;default:{let r=void 0===e.session?e:e.session.socket,s=r[t];return"function"==typeof s?s.bind(r):s}}},getPrototypeOf:e=>void 0!==e.session?Reflect.getPrototypeOf(e.session.socket):Reflect.getPrototypeOf(e),set(e,t,r){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return e[t]=r,!0;case"setTimeout":{let{session:t}=e;return void 0===t?e.setTimeout=r:t.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new s;default:return(void 0===e.session?e:e.session.socket)[t]=r,!0}}}},2056:(e,t,r)=>{"use strict";let{ERR_INVALID_HTTP_TOKEN:s}=r(9442),i=r(2099),o=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if("string"!=typeof e||!o.test(e)&&!i(e))throw new s("Header name",e)}},1251:(e,t,r)=>{"use strict";let{ERR_HTTP_INVALID_HEADER_VALUE:s,ERR_INVALID_CHAR:i}=r(9442),o=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(void 0===t)throw new s(t,e);if(o.test(t))throw new i("header content",e)}},2366:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",s=Array.isArray(t);r=s?"[":"{";var i=!0;for(var o in t){var n="function"==typeof t[o]||!s&&void 0===t[o];Object.hasOwnProperty.call(t,o)&&!n&&(i||(r+=","),i=!1,s?void 0==t[o]?r+="null":r+=e(t[o]):void 0!==t[o]&&(r+=e(o)+":"+e(t[o])))}return r+(s?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t})}},2067:(e,t,r)=>{"use strict";let s=r(2361),i=r(2366),o=e=>{if(e.adapter||e.uri){let t=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(r(4380)({redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"}[t]))(e)}return new Map},n=["sqlite","postgres","mysql","mongo","redis","tiered"];class a extends s{constructor(e,{emitErrors:t=!0,...r}={}){if(super(),this.opts={namespace:"keyv",serialize:i.stringify,deserialize:i.parse,..."string"==typeof e?{uri:e}:e,...r},!this.opts.store){let e={...this.opts};this.opts.store=o(e)}if(this.opts.compression){let e=this.opts.compression;this.opts.serialize=e.serialize.bind(e),this.opts.deserialize=e.deserialize.bind(e)}"function"==typeof this.opts.store.on&&t&&this.opts.store.on("error",e=>this.emit("error",e)),this.opts.store.namespace=this.opts.namespace;let s=e=>async function*(){for await(let[t,r]of"function"==typeof e?e(this.opts.store.namespace):e){let e=await this.opts.deserialize(r);if(!this.opts.store.namespace||t.includes(this.opts.store.namespace)){if("number"==typeof e.expires&&Date.now()>e.expires){this.delete(t);continue}yield[this._getKeyUnprefix(t),e.value]}}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return n.includes(this.opts.store.opts.dialect)||n.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(e=>`${this.opts.namespace}:${e}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){let{store:r}=this.opts,s=Array.isArray(e),i=s?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(s&&void 0===r.getMany){let e=[];for(let s of i)e.push(Promise.resolve().then(()=>r.get(s)).then(e=>"string"==typeof e?this.opts.deserialize(e):this.opts.compression?this.opts.deserialize(e):e).then(e=>null==e?void 0:"number"==typeof e.expires&&Date.now()>e.expires?this.delete(s).then(()=>void 0):t&&t.raw?e:e.value));return Promise.allSettled(e).then(e=>{let t=[];for(let r of e)t.push(r.value);return t})}return Promise.resolve().then(()=>s?r.getMany(i):r.get(i)).then(e=>"string"==typeof e?this.opts.deserialize(e):this.opts.compression?this.opts.deserialize(e):e).then(r=>null==r?void 0:s?r.map((r,s)=>{if("string"==typeof r&&(r=this.opts.deserialize(r)),null!=r){if("number"==typeof r.expires&&Date.now()>r.expires){this.delete(e[s]).then(()=>void 0);return}return t&&t.raw?r:r.value}}):"number"==typeof r.expires&&Date.now()>r.expires?this.delete(e).then(()=>void 0):t&&t.raw?r:r.value)}set(e,t,r){let s=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);let{store:i}=this.opts;return Promise.resolve().then(()=>{let e="number"==typeof r?Date.now()+r:null;return"symbol"==typeof t&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:e},this.opts.serialize(t)}).then(e=>i.set(s,e,r)).then(()=>!0)}delete(e){let{store:t}=this.opts;if(Array.isArray(e)){let r=this._getKeyPrefixArray(e);if(void 0===t.deleteMany){let e=[];for(let s of r)e.push(t.delete(s));return Promise.allSettled(e).then(e=>e.every(e=>!0===e.value))}return Promise.resolve().then(()=>t.deleteMany(r))}let r=this._getKeyPrefix(e);return Promise.resolve().then(()=>t.delete(r))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then(async()=>"function"==typeof r.has?r.has(t):void 0!==await r.get(t))}disconnect(){let{store:e}=this.opts;if("function"==typeof e.disconnect)return e.disconnect()}}e.exports=a},4524:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(let[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(let t of this.oldCache.keys())!this.cache.has(t)&&e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},9403:(e,t,r)=>{"use strict";let s=r(4404);e.exports=(e={},t=s.connect)=>new Promise((r,s)=>{let i,o=!1,n=async()=>{await h,i.off("timeout",a),i.off("error",s),e.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:o}),o&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:o}))},a=async()=>{o=!0,n()},h=(async()=>{try{(i=await t(e,n)).on("error",s),i.once("timeout",a)}catch(e){s(e)}})()})},7462:(e,t,r)=>{"use strict";let s;r.r(t),r.d(t,{AbortError:()=>B,CacheError:()=>$,CancelError:()=>tO,HTTPError:()=>N,MaxRedirectsError:()=>L,Options:()=>tp,ParseError:()=>tm,ReadError:()=>D,RequestError:()=>I,RetryError:()=>M,TimeoutError:()=>z,UploadError:()=>U,calculateRetryDelay:()=>eV,create:()=>tq,default:()=>tI,got:()=>tH,isResponseOk:()=>tf,parseBody:()=>ty,parseLinkHeader:()=>ts});let i=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...i],n=["null","undefined","string","number","bigint","boolean","symbol"];function a(e){return t=>typeof t===e}let{toString:h}=Object.prototype,l=e=>{let t=h.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&u.domElement(e)?"HTMLElement":o.includes(t)?t:void 0},c=e=>t=>l(t)===e;function u(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(u.observable(e))return"Observable";if(u.array(e))return"Array";if(u.buffer(e))return"Buffer";let t=l(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw TypeError("Please don't use object wrappers for primitive types");return"Object"}u.undefined=a("undefined"),u.string=a("string");let d=a("number");u.number=e=>d(e)&&!u.nan(e),u.positiveNumber=e=>u.number(e)&&e>0,u.negativeNumber=e=>u.number(e)&&e<0,u.bigint=a("bigint"),u.function_=a("function"),u.null_=e=>null===e,u.class_=e=>u.function_(e)&&e.toString().startsWith("class "),u.boolean=e=>!0===e||!1===e,u.symbol=a("symbol"),u.numericString=e=>u.string(e)&&!u.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),u.array=(e,t)=>!!Array.isArray(e)&&(!u.function_(t)||e.every(e=>t(e))),u.buffer=e=>e?.constructor?.isBuffer?.(e)??!1,u.blob=e=>c("Blob")(e),u.nullOrUndefined=e=>u.null_(e)||u.undefined(e),u.object=e=>!u.null_(e)&&("object"==typeof e||u.function_(e)),u.iterable=e=>u.function_(e?.[Symbol.iterator]),u.asyncIterable=e=>u.function_(e?.[Symbol.asyncIterator]),u.generator=e=>u.iterable(e)&&u.function_(e?.next)&&u.function_(e?.throw),u.asyncGenerator=e=>u.asyncIterable(e)&&u.function_(e.next)&&u.function_(e.throw),u.nativePromise=e=>c("Promise")(e);let p=e=>u.function_(e?.then)&&u.function_(e?.catch);u.promise=e=>u.nativePromise(e)||p(e),u.generatorFunction=c("GeneratorFunction"),u.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===l(e),u.asyncFunction=e=>"AsyncFunction"===l(e),u.boundFunction=e=>u.function_(e)&&!e.hasOwnProperty("prototype"),u.regExp=c("RegExp"),u.date=c("Date"),u.error=c("Error"),u.map=e=>c("Map")(e),u.set=e=>c("Set")(e),u.weakMap=e=>c("WeakMap")(e),u.weakSet=e=>c("WeakSet")(e),u.weakRef=e=>c("WeakRef")(e),u.int8Array=c("Int8Array"),u.uint8Array=c("Uint8Array"),u.uint8ClampedArray=c("Uint8ClampedArray"),u.int16Array=c("Int16Array"),u.uint16Array=c("Uint16Array"),u.int32Array=c("Int32Array"),u.uint32Array=c("Uint32Array"),u.float32Array=c("Float32Array"),u.float64Array=c("Float64Array"),u.bigInt64Array=c("BigInt64Array"),u.bigUint64Array=c("BigUint64Array"),u.arrayBuffer=c("ArrayBuffer"),u.sharedArrayBuffer=c("SharedArrayBuffer"),u.dataView=c("DataView"),u.enumCase=(e,t)=>Object.values(t).includes(e),u.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,u.urlInstance=e=>c("URL")(e),u.urlString=e=>{if(!u.string(e))return!1;try{return new URL(e),!0}catch{return!1}},u.truthy=e=>!!e,u.falsy=e=>!e,u.nan=e=>Number.isNaN(e),u.primitive=e=>{var t;return u.null_(e)||(t=typeof e,n.includes(t))},u.integer=e=>Number.isInteger(e),u.safeInteger=e=>Number.isSafeInteger(e),u.plainObject=e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},u.typedArray=e=>{var t;return t=l(e),i.includes(t)};let f=e=>u.safeInteger(e)&&e>=0;u.arrayLike=e=>!u.nullOrUndefined(e)&&!u.function_(e)&&f(e.length),u.tupleLike=(e,t)=>!!(u.array(t)&&u.array(e))&&t.length===e.length&&t.every((t,r)=>t(e[r])),u.inRange=(e,t)=>{if(u.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(u.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw TypeError(`Invalid range: ${JSON.stringify(t)}`)};let m=["innerHTML","ownerDocument","style","attributes","nodeValue"];u.domElement=e=>u.object(e)&&1===e.nodeType&&u.string(e.nodeName)&&!u.plainObject(e)&&m.every(t=>t in e),u.observable=e=>!!e&&(e===e[Symbol.observable]?.()||e===e["@@observable"]?.()),u.nodeStream=e=>u.object(e)&&u.function_(e.pipe)&&!u.observable(e),u.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;let y=e=>t=>u.integer(t)&&Math.abs(t%2)===e;u.evenInteger=y(0),u.oddInteger=y(1),u.emptyArray=e=>u.array(e)&&0===e.length,u.nonEmptyArray=e=>u.array(e)&&e.length>0,u.emptyString=e=>u.string(e)&&0===e.length;let g=e=>u.string(e)&&!/\S/.test(e);u.emptyStringOrWhitespace=e=>u.emptyString(e)||g(e),u.nonEmptyString=e=>u.string(e)&&e.length>0,u.nonEmptyStringAndNotWhitespace=e=>u.string(e)&&!u.emptyStringOrWhitespace(e),u.emptyObject=e=>u.object(e)&&!u.map(e)&&!u.set(e)&&0===Object.keys(e).length,u.nonEmptyObject=e=>u.object(e)&&!u.map(e)&&!u.set(e)&&Object.keys(e).length>0,u.emptySet=e=>u.set(e)&&0===e.size,u.nonEmptySet=e=>u.set(e)&&e.size>0,u.emptyMap=e=>u.map(e)&&0===e.size,u.nonEmptyMap=e=>u.map(e)&&e.size>0,u.propertyKey=e=>u.any([u.string,u.number,u.symbol],e),u.formData=e=>c("FormData")(e),u.urlSearchParams=e=>c("URLSearchParams")(e);let b=(e,t,r)=>{if(!u.function_(t))throw TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===r.length)throw TypeError("Invalid number of values");return e.call(r,t)};u.any=(e,...t)=>(u.array(e)?e:[e]).some(e=>b(Array.prototype.some,e,t)),u.all=(e,...t)=>b(Array.prototype.every,e,t);let _=(e,t,r,s={})=>{if(!e){let{multipleValues:e}=s,i=e?`received values of types ${[...new Set(r.map(e=>`\`${u(e)}\``))].join(", ")}`:`received value of type \`${u(r)}\``;throw TypeError(`Expected value which is \`${t}\`, ${i}.`)}},v={undefined:e=>_(u.undefined(e),"undefined",e),string:e=>_(u.string(e),"string",e),number:e=>_(u.number(e),"number",e),positiveNumber:e=>_(u.positiveNumber(e),"positive number",e),negativeNumber:e=>_(u.negativeNumber(e),"negative number",e),bigint:e=>_(u.bigint(e),"bigint",e),function_:e=>_(u.function_(e),"Function",e),null_:e=>_(u.null_(e),"null",e),class_:e=>_(u.class_(e),"Class",e),boolean:e=>_(u.boolean(e),"boolean",e),symbol:e=>_(u.symbol(e),"symbol",e),numericString:e=>_(u.numericString(e),"string with a number",e),array:(e,t)=>{_(u.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>_(u.buffer(e),"Buffer",e),blob:e=>_(u.blob(e),"Blob",e),nullOrUndefined:e=>_(u.nullOrUndefined(e),"null or undefined",e),object:e=>_(u.object(e),"Object",e),iterable:e=>_(u.iterable(e),"Iterable",e),asyncIterable:e=>_(u.asyncIterable(e),"AsyncIterable",e),generator:e=>_(u.generator(e),"Generator",e),asyncGenerator:e=>_(u.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>_(u.nativePromise(e),"native Promise",e),promise:e=>_(u.promise(e),"Promise",e),generatorFunction:e=>_(u.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>_(u.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>_(u.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>_(u.boundFunction(e),"Function",e),regExp:e=>_(u.regExp(e),"RegExp",e),date:e=>_(u.date(e),"Date",e),error:e=>_(u.error(e),"Error",e),map:e=>_(u.map(e),"Map",e),set:e=>_(u.set(e),"Set",e),weakMap:e=>_(u.weakMap(e),"WeakMap",e),weakSet:e=>_(u.weakSet(e),"WeakSet",e),weakRef:e=>_(u.weakRef(e),"WeakRef",e),int8Array:e=>_(u.int8Array(e),"Int8Array",e),uint8Array:e=>_(u.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>_(u.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>_(u.int16Array(e),"Int16Array",e),uint16Array:e=>_(u.uint16Array(e),"Uint16Array",e),int32Array:e=>_(u.int32Array(e),"Int32Array",e),uint32Array:e=>_(u.uint32Array(e),"Uint32Array",e),float32Array:e=>_(u.float32Array(e),"Float32Array",e),float64Array:e=>_(u.float64Array(e),"Float64Array",e),bigInt64Array:e=>_(u.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>_(u.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>_(u.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>_(u.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>_(u.dataView(e),"DataView",e),enumCase:(e,t)=>_(u.enumCase(e,t),"EnumCase",e),urlInstance:e=>_(u.urlInstance(e),"URL",e),urlString:e=>_(u.urlString(e),"string with a URL",e),truthy:e=>_(u.truthy(e),"truthy",e),falsy:e=>_(u.falsy(e),"falsy",e),nan:e=>_(u.nan(e),"NaN",e),primitive:e=>_(u.primitive(e),"primitive",e),integer:e=>_(u.integer(e),"integer",e),safeInteger:e=>_(u.safeInteger(e),"integer",e),plainObject:e=>_(u.plainObject(e),"plain object",e),typedArray:e=>_(u.typedArray(e),"TypedArray",e),arrayLike:e=>_(u.arrayLike(e),"array-like",e),tupleLike:(e,t)=>_(u.tupleLike(e,t),"tuple-like",e),domElement:e=>_(u.domElement(e),"HTMLElement",e),observable:e=>_(u.observable(e),"Observable",e),nodeStream:e=>_(u.nodeStream(e),"Node.js Stream",e),infinite:e=>_(u.infinite(e),"infinite number",e),emptyArray:e=>_(u.emptyArray(e),"empty array",e),nonEmptyArray:e=>_(u.nonEmptyArray(e),"non-empty array",e),emptyString:e=>_(u.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>_(u.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>_(u.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>_(u.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>_(u.emptyObject(e),"empty object",e),nonEmptyObject:e=>_(u.nonEmptyObject(e),"non-empty object",e),emptySet:e=>_(u.emptySet(e),"empty set",e),nonEmptySet:e=>_(u.nonEmptySet(e),"non-empty set",e),emptyMap:e=>_(u.emptyMap(e),"empty map",e),nonEmptyMap:e=>_(u.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>_(u.propertyKey(e),"PropertyKey",e),formData:e=>_(u.formData(e),"FormData",e),urlSearchParams:e=>_(u.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>_(u.evenInteger(e),"even integer",e),oddInteger:e=>_(u.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>_(u.directInstanceOf(e,t),"T",e),inRange:(e,t)=>_(u.inRange(e,t),"in range",e),any:(e,...t)=>_(u.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>_(u.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}}),Object.defineProperties(v,{class:{value:v.class_},function:{value:v.function_},null:{value:v.null_}});var w,S,E,x,k,O,C,R,P,T,j,A=r(5673);class q extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class H{static fn(e){return(...t)=>new H((r,s,i)=>{t.push(i),e(...t).then(r,s)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,r)=>{this._reject=r;let s=e=>{if(!this._isPending)throw Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e(e=>{this._isCanceled&&s.shouldReject||(this._isPending=!1,t(e))},e=>{this._isPending=!1,r(e)},s)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let e of this._cancelHandlers)e()}catch(e){this._reject(e);return}this._rejectOnCancel&&this._reject(new q(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(H.prototype,Promise.prototype);class I extends Error{constructor(e,t,r){if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,function(e){return u.object(e)&&"_onResponse"in e}(r)?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),this.options=r.options):this.options=r,this.timings=this.request?.timings,u.string(t.stack)&&u.string(this.stack)){let e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),s=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;s.length>0&&s[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${s.reverse().join("\n")}`}}}class L extends I{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class N extends I{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class $ extends I{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class U extends I{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class z extends I{constructor(e,t,r){super(e.message,e,r),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}}class D extends I{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class M extends I{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}}class B extends I{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}}var F=r(7742),W=r(2254),V=r(4492),G=r(3020),J=r(8849),K=r(2361),Q=r(3837),Y=r(7300);let X=e=>{if(e.timings)return e.timings;let t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;let r=e=>{e.once(K.errorMonitor,()=>{t.error=Date.now(),t.phases.total=t.error-t.start})};r(e);let s=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",s);let i=e=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,Q.types.isProxy(e))return;let r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),Y(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?i(e.socket):e.prependOnceListener("socket",i);let o=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};return e.writableFinished?o():e.prependOnceListener("finish",o),e.prependOnceListener("response",i=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,i.timings=t,r(i),i.prependOnceListener("end",()=>{e.off("abort",s),i.off("aborted",s),t.phases.total||(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)}),i.prependOnceListener("aborted",s)}),t};var Z=r(6005);let ee=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e),et=new Set(["https:","http:","file:"]),er=e=>{try{let{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!et.has(t)}catch{return!1}},es=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw Error(`Invalid URL: ${e}`);let{type:s,data:i,hash:o}=r.groups,n=s.split(";");o=t?"":o;let a=!1;"base64"===n[n.length-1]&&(n.pop(),a=!0);let h=n.shift()?.toLowerCase()??"",l=[...n.map(e=>{let[t,r=""]=e.split("=").map(e=>e.trim());return"charset"===t&&"us-ascii"===(r=r.toLowerCase())?"":`${t}${r?`=${r}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length>0||h&&"text/plain"!==h)&&l.unshift(h),`data:${l.join(";")},${a?i.trim():i}${o?`#${o}`:""}`};var ei=r(8621),eo=r(2988);function en(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e.toLowerCase(),t]))}class ea extends V.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:r,url:s}){if("number"!=typeof e)throw TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw TypeError("Argument `headers` should be an object");if(!(r instanceof Uint8Array))throw TypeError("Argument `body` should be a buffer");if("string"!=typeof s)throw TypeError("Argument `url` should be a string");super({read(){this.push(r),this.push(null)}}),this.statusCode=e,this.headers=en(t),this.body=r,this.url=s}}var eh=r(2067);let el=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class ec extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class eu extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class ed{constructor(e,t){this.hooks=new Map,this.request=()=>(e,t)=>{let r;if("string"==typeof e)r=ey(G.parse(e)),e={};else if(e instanceof G.URL)r=ey(G.parse(e.toString())),e={};else{let[t,...s]=(e.path??"").split("?"),i=s.length>0?`?${s.join("?")}`:"";r=ey({...e,pathname:t,search:i})}(e={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...e,...em(r)}).headers=Object.fromEntries(ep(e.headers).map(([e,t])=>[e.toLowerCase(),t]));let s=new A,i=function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,removePath:!1,transformPath:!1,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return es(e,t);if(er(e))return e;let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let s=new URL(e);if(t.forceHttp&&t.forceHttps)throw Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===s.protocol&&(s.protocol="http:"),t.forceHttps&&"http:"===s.protocol&&(s.protocol="https:"),t.stripAuthentication&&(s.username="",s.password=""),t.stripHash?s.hash="":t.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname){let e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,t=0,r="";for(;;){let i=e.exec(s.pathname);if(!i)break;let o=i[0],n=i.index;r+=s.pathname.slice(t,n).replace(/\/{2,}/g,"/")+o,t=n+o.length}r+=s.pathname.slice(t,s.pathname.length).replace(/\/{2,}/g,"/"),s.pathname=r}if(s.pathname)try{s.pathname=decodeURI(s.pathname).replace(/\\/g,"%5C")}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=s.pathname.split("/");ee(e[e.length-1],t.removeDirectoryIndex)&&(e=e.slice(0,-1),s.pathname=e.slice(1).join("/")+"/")}if(t.removePath&&(s.pathname="/"),t.transformPath&&"function"==typeof t.transformPath){let e=s.pathname.split("/").filter(Boolean),r=t.transformPath(e);s.pathname=r?.length>0?`/${r.join("/")}`:"/"}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let e of[...s.searchParams.keys()])ee(e,t.removeQueryParameters)&&s.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(s.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(let e of[...s.searchParams.keys()])ee(e,t.keepQueryParameters)||s.searchParams.delete(e);if(t.sortQueryParameters){let e=s.search;s.searchParams.sort();try{s.search=decodeURIComponent(s.search)}catch{}for(let t of e.slice(1).split("&").filter(e=>e&&!e.includes("="))){let e=decodeURIComponent(t);s.search=s.search.replace(`?${e}=`,`?${e}`).replace(`&${e}=`,`&${e}`)}}t.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),t.removeExplicitPort&&s.port&&(s.port="");let i=e;return e=s.toString(),t.removeSingleSlash||"/"!==s.pathname||i.endsWith("/")||""!==s.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===s.pathname)&&""===s.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(G.format(r),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),o=`${e.method}:${i}`;e.body&&void 0!==e.method&&["POST","PATCH","PUT"].includes(e.method)&&(e.body instanceof V.Readable?e.cache=!1:o+=`:${Z.createHash("md5").update(e.body).digest("hex")}`);let n=!1,a=!1,h=e=>{a=!0;let r=!1,i=()=>{},h=new Promise(e=>{i=()=>{r||(r=!0,e())}}),l=async r=>{let i;if(n){r.status=r.statusCode;let t=eo.fromObject(n.cachePolicy).revalidatedPolicy(e,r);if(!t.modified){r.resume(),await new Promise(e=>{r.once("end",e)});let e=eg(t.policy.responseHeaders());(r=new ea({statusCode:n.statusCode,headers:e,body:n.body,url:n.url})).cachePolicy=t.policy,r.fromCache=!0}}r.fromCache||(r.cachePolicy=new eo(e,r,e),r.fromCache=!1),e.cache&&r.cachePolicy.storable()?(i=ef(r),(async()=>{try{let t=ei.buffer(r);await Promise.race([h,new Promise(e=>r.once("end",e)),new Promise(e=>r.once("close",e))]);let s=await t,i={url:r.url,statusCode:r.fromCache?n.statusCode:r.statusCode,body:s,cachePolicy:r.cachePolicy.toObject()},a=e.strictTtl?r.cachePolicy.timeToLive():void 0;if(e.maxTtl&&(a=a?Math.min(a,e.maxTtl):e.maxTtl),this.hooks.size>0)for(let e of this.hooks.keys())i=await this.runHook(e,i,r);await this.cache.set(o,i,a)}catch(e){s.emit("error",new eu(e))}})()):e.cache&&n&&(async()=>{try{await this.cache.delete(o)}catch(e){s.emit("error",new eu(e))}})(),s.emit("response",i??r),"function"==typeof t&&t(i??r)};try{let t=this.cacheRequest(e,l);t.once("error",i),t.once("abort",i),t.once("destroy",i),s.emit("request",t)}catch(e){s.emit("error",new ec(e))}};return(async()=>{let r=async e=>{await Promise.resolve();let r=e.cache?await this.cache.get(o):void 0;if(void 0===r&&!e.forceRefresh){h(e);return}let i=eo.fromObject(r.cachePolicy);if(i.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){let e=eg(i.responseHeaders()),o=new ea({statusCode:r.statusCode,headers:e,body:r.body,url:r.url});o.cachePolicy=i,o.fromCache=!0,s.emit("response",o),"function"==typeof t&&t(o)}else i.satisfiesWithoutRevalidation(e)&&Date.now()>=i.timeToLive()&&e.forceRefresh?await this.cache.delete(o):n=r,e.headers=i.revalidationHeaders(e),h(e)},i=e=>s.emit("error",new eu(e));if(this.cache instanceof eh){let e=this.cache;e.once("error",i),s.on("error",()=>e.removeListener("error",i)),s.on("response",()=>e.removeListener("error",i))}try{await r(e)}catch(t){e.automaticFailover&&!a&&h(e),s.emit("error",new eu(t))}})(),s},this.addHook=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,t)},this.removeHook=e=>this.hooks.delete(e),this.getHook=e=>this.hooks.get(e),this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t),t instanceof eh?this.cache=t:"string"==typeof t?this.cache=new eh({uri:t,namespace:"cacheable-request"}):this.cache=new eh({store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}}let ep=Object.entries,ef=e=>{let t=new V.PassThrough({autoDestroy:!1});return function(e,t){if(t._readableState.autoDestroy)throw Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(e),...el]),s={};for(let i of r)i in t||(s[i]={get(){let t=e[i];return"function"==typeof t?t.bind(e):t},set(t){e[i]=t},enumerable:!0,configurable:!1});Object.defineProperties(t,s),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")})}(e,t),e.pipe(t)},em=e=>{let t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},ey=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),eg=e=>{let t=[];for(let r of Object.keys(e))t[r.toLowerCase()]=e[r];return t};var eb=r(991);let e_=e=>"function"==typeof e,ev=e=>!!(e&&e_(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&e_(e.append)&&e_(e.getAll)&&e_(e.entries)&&e_(e[Symbol.iterator])),ew=e=>e_(e[Symbol.asyncIterator]);async function*eS(e){let t=e.getReader();for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}let eE=e=>{if(ew(e))return e;if(e_(e.getReader))return eS(e);throw TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},ex="abcdefghijklmnopqrstuvwxyz0123456789",ek=e=>String(e).replace(/\r|\n/g,(e,t,r)=>"\r"===e&&"\n"!==r[t+1]||"\n"===e&&"\r"!==r[t-1]?"\r\n":e),eO=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function eC(e){if("object"!==eO(e))return!1;let t=Object.getPrototypeOf(e);return null==t||(t.constructor&&t.constructor.toString())===Object.toString()}function eR(e,t){if("string"==typeof t){for(let[r,s]of Object.entries(e))if(t.toLowerCase()===r.toLowerCase())return s}}let eP=e=>new Proxy(e,{get:(e,t)=>eR(e,t),has:(e,t)=>void 0!==eR(e,t)}),eT=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),ej=e=>!!(e&&"object"==typeof e&&e_(e.constructor)&&"File"===e[Symbol.toStringTag]&&e_(e.stream)&&null!=e.name);var eA=function(e,t,r,s,i){if("m"===s)throw TypeError("Private method is not writable");if("a"===s&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r},eq=function(e,t,r,s){if("a"===r&&!s)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};let eH={enableAdditionalHeaders:!1},eI={writable:!1,configurable:!1};class eL{constructor(e,t,r){let s;if(w.add(this),S.set(this,"\r\n"),E.set(this,void 0),x.set(this,void 0),k.set(this,"-".repeat(2)),O.set(this,new TextEncoder),C.set(this,void 0),R.set(this,void 0),P.set(this,void 0),!ev(e))throw TypeError("Expected first argument to be a FormData instance.");if(eC(t)?r=t:s=t,s||(s=function(){let e=16,t="";for(;e--;)t+=ex[Math.random()*ex.length<<0];return t}()),"string"!=typeof s)throw TypeError("Expected boundary argument to be a string.");if(r&&!eC(r))throw TypeError("Expected options argument to be an object.");eA(this,R,Array.from(e.entries()),"f"),eA(this,P,{...eH,...r},"f"),eA(this,E,eq(this,O,"f").encode(eq(this,S,"f")),"f"),eA(this,x,eq(this,E,"f").byteLength,"f"),this.boundary=`form-data-boundary-${s}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,eA(this,C,eq(this,O,"f").encode(`${eq(this,k,"f")}${this.boundary}${eq(this,k,"f")}${eq(this,S,"f").repeat(2)}`),"f");let i={"Content-Type":this.contentType},o=eq(this,w,"m",j).call(this);o&&(this.contentLength=o,i["Content-Length"]=o),this.headers=eP(Object.freeze(i)),Object.defineProperties(this,{boundary:eI,contentType:eI,contentLength:eI,headers:eI})}getContentLength(){return null==this.contentLength?void 0:Number(this.contentLength)}*values(){for(let[e,t]of eq(this,R,"f")){let r=ej(t)?t:eq(this,O,"f").encode(ek(t));yield eq(this,w,"m",T).call(this,e,r),yield r,yield eq(this,E,"f")}yield eq(this,C,"f")}async *encode(){for(let e of this.values())ej(e)?yield*eE(e.stream()):yield e}[(S=new WeakMap,E=new WeakMap,x=new WeakMap,k=new WeakMap,O=new WeakMap,C=new WeakMap,R=new WeakMap,P=new WeakMap,w=new WeakSet,T=function(e,t){let r="";r+=`${eq(this,k,"f")}${this.boundary}${eq(this,S,"f")}Content-Disposition: form-data; name="${eT(e)}"`,ej(t)&&(r+=`; filename="${eT(t.name)}"${eq(this,S,"f")}Content-Type: ${t.type||"application/octet-stream"}`);let s=ej(t)?t.size:t.byteLength;return!0!==eq(this,P,"f").enableAdditionalHeaders||null==s||isNaN(s)||(r+=`${eq(this,S,"f")}Content-Length: ${ej(t)?t.size:t.byteLength}`),eq(this,O,"f").encode(`${r}${eq(this,S,"f").repeat(2)}`)},j=function(){let e=0;for(let[t,r]of eq(this,R,"f")){let s=ej(r)?r:eq(this,O,"f").encode(ek(r)),i=ej(s)?s.size:s.byteLength;if(null==i||isNaN(i))return;e+=eq(this,w,"m",T).call(this,t,s).byteLength+i+eq(this,x,"f")}return String(e+eq(this,C,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}var eN=r(7261);function e$(e){return u.nodeStream(e)&&u.function_(e.getBoundary)}async function eU(e,t){return t&&"content-length"in t?Number(t["content-length"]):e?u.string(e)?W.Buffer.byteLength(e):u.buffer(e)?e.length:e$(e)?(0,eN.promisify)(e.getLength.bind(e))():void 0:0}function ez(e,t,r){let s={};for(let i of r){let r=(...e)=>{t.emit(i,...e)};s[i]=r,e.on(i,r)}return()=>{for(let[t,r]of Object.entries(s))e.off(t,r)}}var eD=r(7503);let eM=Symbol("reentry"),eB=()=>{};class eF extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}}class eW{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}}let eV=({attemptCount:e,retryOptions:t,error:r,retryAfter:s,computedValue:i})=>{if("RetryError"===r.name)return 1;if(e>t.limit)return 0;let o=t.methods.includes(r.options.method),n=t.errorCodes.includes(r.code),a=r.response&&t.statusCodes.includes(r.response.statusCode);if(!o||!n&&!a)return 0;if(r.response){if(s)return s>i?0:s;if(413===r.response.statusCode)return 0}let h=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+h};var eG=r(1764),eJ=r(2286),eK=r(604),eQ=r(612);let{Resolver:eY}=eK.promises,eX=Symbol("cacheableLookupCreateConnection"),eZ=Symbol("cacheableLookupInstance"),e0=Symbol("expires"),e1="number"==typeof eK.ALL,e2=e=>{if(!(e&&"function"==typeof e.createConnection))throw Error("Expected an Agent instance as the first argument")},e4=e=>{for(let t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)},e6=()=>{let e=!1,t=!1;for(let r of Object.values(eQ.networkInterfaces()))for(let s of r)if(!s.internal&&("IPv6"===s.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},e3=e=>Symbol.iterator in e,e5=e=>e.catch(e=>{if("ENODATA"===e.code||"ENOTFOUND"===e.code||"ENOENT"===e.code)return[];throw e}),e8={ttl:!0},e7={all:!0},e9={all:!0,family:4},te={all:!0,family:6};class tt{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:s=.15,resolver:i=new eY,lookup:o=eK.lookup}={}){if(this.maxTtl=t,this.errorTtl=s,this._cache=e,this._resolver=i,this._dnsLookup=o&&(0,eN.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof eY?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,eN.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,eN.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=e6(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=r,r>0){let e=setInterval(()=>{this._hostnamesToFallback.clear()},1e3*r);e.unref&&e.unref(),this._fallbackInterval=e}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw Error("Callback must be a function.");this.lookupAsync(e,t).then(e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl,e.source)},r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){let e=r.filter(e=>6===e.family);t.hints&eK.V4MAPPED&&(e1&&t.hints&eK.ALL||0===e.length)?e4(r):r=e}else 4===t.family&&(r=r.filter(e=>4===e.family));if(t.hints&eK.ADDRCONFIG){let{_iface:e}=this;r=r.filter(t=>6===t.family?e.has6:e.has4)}if(0===r.length){let t=Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t="cache",r=await this._cache.get(e);if(r&&this.stats.cache++,!r){let s=this._pending[e];if(s)this.stats.cache++,r=await s;else{t="query";let s=this.queryAndCache(e);this._pending[e]=s,this.stats.query++;try{r=await s}finally{delete this._pending[e]}}}return r.map(e=>({...e,source:t}))}async _resolve(e){let[t,r]=await Promise.all([e5(this._resolve4(e,e8)),e5(this._resolve6(e,e8))]),s=0,i=0,o=0,n=Date.now();for(let e of t)e.family=4,e.expires=n+1e3*e.ttl,s=Math.max(s,e.ttl);for(let e of r)e.family=6,e.expires=n+1e3*e.ttl,i=Math.max(i,e.ttl);return o=t.length>0?r.length>0?Math.min(s,i):s:i,{entries:[...t,...r],cacheTtl:o}}async _lookup(e){try{let[t,r]=await Promise.all([e5(this._dnsLookup(e,e9)),e5(this._dnsLookup(e,te))]);return{entries:[...t,...r],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[e0]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{let t=Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}e3(this._cache)&&this._tick(r)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,e7);let t=await this._resolve(e);0===t.entries.length&&this._dnsLookup&&0!==(t=await this._lookup(e)).entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e);let r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){let t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let e=1/0,t=Date.now();for(let[r,s]of this._cache){let i=s[e0];t>=i?this._cache.delete(r):i<e&&(e=i)}e!==1/0&&this._tick(e-t)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(e2(e),eX in e)throw Error("CacheableLookup has been already installed");e[eX]=e.createConnection,e[eZ]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[eX](t,r))}uninstall(e){if(e2(e),e[eX]){if(e[eZ]!==this)throw Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[eX],delete e[eX],delete e[eZ]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=e6(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}}var tr=r(7484);function ts(e){let t=[];for(let r of e.split(",")){let[s,...i]=r.split(";"),o=s.trim();if("<"!==o[0]||">"!==o[o.length-1])throw Error(`Invalid format of the Link header reference: ${o}`);let n=o.slice(1,-1),a={};if(0===i.length)throw Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let t of i){let r=t.trim(),s=r.indexOf("=");if(-1===s)throw Error(`Failed to parse Link header: ${e}`);let i=r.slice(0,s).trim(),o=r.slice(s+1).trim();a[i]=o}t.push({reference:n,parameters:a})}return t}let[ti,to]=F.versions.node.split(".").map(Number),tn=new Map,ta=()=>s||(s=new tt),th={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate({response:e}){let t=e.headers.link;if("string"!=typeof t||""===t.trim())return!1;let r=ts(t).find(e=>"next"===e.parameters.rel||'"next"'===e.parameters.rel);return!!r&&{url:new G.URL(r.reference,e.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},tl=e=>{let{hooks:t,retry:r}=e,s={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new G.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return void 0!==s.url&&(s.prefixUrl=""),s},tc=e=>{let{hooks:t,retry:r}=e,s={...e};return u.object(e.context)&&(s.context={...e.context}),u.object(e.cacheOptions)&&(s.cacheOptions={...e.cacheOptions}),u.object(e.https)&&(s.https={...e.https}),u.object(e.cacheOptions)&&(s.cacheOptions={...s.cacheOptions}),u.object(e.agent)&&(s.agent={...e.agent}),u.object(e.headers)&&(s.headers={...e.headers}),u.object(r)&&(s.retry={...r},u.array(r.errorCodes)&&(s.retry.errorCodes=[...r.errorCodes]),u.array(r.methods)&&(s.retry.methods=[...r.methods]),u.array(r.statusCodes)&&(s.retry.statusCodes=[...r.statusCodes])),u.object(e.timeout)&&(s.timeout={...e.timeout}),u.object(t)&&(s.hooks={...t},u.array(t.init)&&(s.hooks.init=[...t.init]),u.array(t.beforeRequest)&&(s.hooks.beforeRequest=[...t.beforeRequest]),u.array(t.beforeError)&&(s.hooks.beforeError=[...t.beforeError]),u.array(t.beforeRedirect)&&(s.hooks.beforeRedirect=[...t.beforeRedirect]),u.array(t.beforeRetry)&&(s.hooks.beforeRetry=[...t.beforeRetry]),u.array(t.afterResponse)&&(s.hooks.afterResponse=[...t.afterResponse])),u.object(e.pagination)&&(s.pagination={...e.pagination}),s},tu=e=>{let t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter(e=>"number"==typeof e);if(t.length>0)return Math.min(...t)},td=(e,t,r)=>{let s=e.hooks?.init;if(s)for(let e of s)e(t,r)};class tp{constructor(e,t,r){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),v.any([u.string,u.urlInstance,u.object,u.undefined],e),v.any([u.object,u.undefined],t),v.any([u.object,u.undefined],r),e instanceof tp||t instanceof tp)throw TypeError("The defaults must be passed as the third argument");this._internals=tl(r?._internals??r??th),this._init=[...r?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(u.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(t?.url!==void 0){if(void 0===e)this.url=t.url;else throw TypeError("The `url` option is mutually exclusive with the `input` argument")}else void 0!==e&&(this.url=e)}}catch(e){throw e.options=this,e}}merge(e){if(e){if(e instanceof tp){for(let t of e._init)this.merge(t);return}td(this,e=tc(e),this),td(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(let r in e)if("mutableDefaults"!==r&&"handlers"!==r&&"url"!==r){if(!(r in this))throw Error(`Unexpected option: ${r}`);this[r]=e[r],t=!0}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){v.any([u.function_,u.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){for(let t in v.plainObject(e),e){if(!(t in this._internals.agent))throw TypeError(`Unexpected agent option: ${t}`);v.any([u.object,u.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){v.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){for(let t in v.plainObject(e),e){if(!(t in this._internals.timeout))throw Error(`Unexpected timeout option: ${t}`);v.any([u.number,u.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(v.any([u.string,u.urlInstance],e),""===e){this._internals.prefixUrl="";return}if((e=e.toString()).endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){v.any([u.string,u.buffer,u.nodeStream,u.generator,u.asyncGenerator,ev,u.undefined],e),u.nodeStream(e)&&v.truthy(e.readable),void 0!==e&&(v.undefined(this._internals.form),v.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){v.any([u.plainObject,u.undefined],e),void 0!==e&&(v.undefined(this._internals.body),v.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){void 0!==e&&(v.undefined(this._internals.body),v.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(v.any([u.string,u.urlInstance,u.undefined],e),void 0===e){this._internals.url=void 0;return}if(u.string(e)&&e.startsWith("/"))throw Error("`url` must not start with a slash");let t=`${this.prefixUrl}${e.toString()}`,r=new G.URL(t);if(this._internals.url=r,"unix:"===r.protocol&&(r.href=`http://unix${r.pathname}${r.search}`),"http:"!==r.protocol&&"https:"!==r.protocol){let e=Error(`Unsupported protocol: ${r.protocol}`);throw e.code="ERR_UNSUPPORTED_PROTOCOL",e}if(this._internals.username&&(r.username=this._internals.username,this._internals.username=""),this._internals.password&&(r.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(r.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"===r.hostname){if(!this._internals.enableUnixSockets)throw Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(e?.groups){let{socketPath:t,path:r}=e.groups;this._unixOptions={socketPath:t,path:r,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(v.any([u.object,u.undefined],e),void 0===e){this._internals.cookieJar=void 0;return}let{setCookie:t,getCookieString:r}=e;v.function_(t),v.function_(r),4===t.length&&0===r.length?(t=(0,eN.promisify)(t.bind(e)),r=(0,eN.promisify)(r.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:r}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){v.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){v.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new G.URLSearchParams),this._internals.searchParams)}set searchParams(e){let t;v.any([u.string,u.object,u.undefined],e);let r=this._internals.url;if(void 0===e){this._internals.searchParams=void 0,r&&(r.search="");return}let s=this.searchParams;if(u.string(e))t=new G.URLSearchParams(e);else if(e instanceof G.URLSearchParams)t=e;else for(let r in function(e){for(let t in e){let r=e[t];v.any([u.string,u.number,u.boolean,u.null_,u.undefined],r)}}(e),t=new G.URLSearchParams,e){let i=e[r];null===i?t.append(r,""):void 0===i?s.delete(r):t.append(r,i)}if(this._merging){for(let e of t.keys())s.delete(e);for(let[e,r]of t)s.append(e,r)}else r?r.search=s.toString():this._internals.searchParams=s}get searchParameters(){throw Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){v.any([u.function_,u.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){v.any([u.object,u.boolean,u.undefined],e),!0===e?this._internals.dnsCache=ta():!1===e?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){v.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){for(let t in v.object(e),e){if(!(t in this._internals.hooks))throw Error(`Unexpected hook event: ${t}`);let r=e[t];if(v.any([u.array,u.undefined],r),r)for(let e of r)v.function_(e);if(this._merging)r&&this._internals.hooks[t].push(...r);else{if(!r)throw Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...r]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){v.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){v.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){v.any([u.object,u.string,u.boolean,u.undefined],e),!0===e?this._internals.cache=tn:!1===e?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){v.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url;return decodeURIComponent(e?e.username:this._internals.username)}set username(e){v.string(e);let t=this._internals.url,r=encodeURIComponent(e);t?t.username=r:this._internals.username=r}get password(){let e=this._internals.url;return decodeURIComponent(e?e.password:this._internals.password)}set password(e){v.string(e);let t=this._internals.url,r=encodeURIComponent(e);t?t.password=r:this._internals.password=r}get http2(){return this._internals.http2}set http2(e){v.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){v.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){v.plainObject(e),this._merging?Object.assign(this._internals.headers,en(e)):this._internals.headers=en(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){v.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(void 0!==e&&4!==e&&6!==e)throw TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){v.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){v.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(v.plainObject(e),v.any([u.function_,u.undefined],e.calculateDelay),v.any([u.number,u.undefined],e.maxRetryAfter),v.any([u.number,u.undefined],e.limit),v.any([u.array,u.undefined],e.methods),v.any([u.array,u.undefined],e.statusCodes),v.any([u.array,u.undefined],e.errorCodes),v.any([u.number,u.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let t in e)if(!(t in this._internals.retry))throw Error(`Unexpected retry option: ${t}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:t}=this._internals;t.methods=[...new Set(t.methods.map(e=>e.toUpperCase()))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){v.any([u.string,u.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){v.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){v.any([u.function_,u.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){for(let t in v.plainObject(e),v.any([u.boolean,u.undefined],e.shared),v.any([u.number,u.undefined],e.cacheHeuristic),v.any([u.number,u.undefined],e.immutableMinTimeToLive),v.any([u.boolean,u.undefined],e.ignoreCargoCult),e)if(!(t in this._internals.cacheOptions))throw Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){for(let t in v.plainObject(e),v.any([u.boolean,u.undefined],e.rejectUnauthorized),v.any([u.function_,u.undefined],e.checkServerIdentity),v.any([u.string,u.object,u.array,u.undefined],e.certificateAuthority),v.any([u.string,u.object,u.array,u.undefined],e.key),v.any([u.string,u.object,u.array,u.undefined],e.certificate),v.any([u.string,u.undefined],e.passphrase),v.any([u.string,u.buffer,u.array,u.undefined],e.pfx),v.any([u.array,u.undefined],e.alpnProtocols),v.any([u.string,u.undefined],e.ciphers),v.any([u.string,u.buffer,u.undefined],e.dhparam),v.any([u.string,u.undefined],e.signatureAlgorithms),v.any([u.string,u.undefined],e.minVersion),v.any([u.string,u.undefined],e.maxVersion),v.any([u.boolean,u.undefined],e.honorCipherOrder),v.any([u.number,u.undefined],e.tlsSessionLifetime),v.any([u.string,u.undefined],e.ecdhCurve),v.any([u.string,u.buffer,u.array,u.undefined],e.certificateRevocationLists),e)if(!(t in this._internals.https))throw Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(null===e)throw TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");v.any([u.string,u.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){v.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){v.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(void 0===e){this._internals.responseType="text";return}if("text"!==e&&"buffer"!==e&&"json"!==e)throw Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){v.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){v.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){v.any([u.number,u.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){v.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,eN.inspect)(this._internals,t)}createNativeRequestOptions(){let e;let t=this._internals;e="https:"===t.url.protocol?t.http2?t.agent:t.agent.https:t.agent.http;let{https:r}=t,{pfx:s}=r;return u.array(s)&&u.plainObject(s[0])&&(s=s.map(e=>({buf:e.buffer,passphrase:e.passphrase}))),{...t.cacheOptions,...this._unixOptions,ALPNProtocols:r.alpnProtocols,ca:r.certificateAuthority,cert:r.certificate,key:r.key,passphrase:r.passphrase,pfx:r.pfx,rejectUnauthorized:r.rejectUnauthorized,checkServerIdentity:r.checkServerIdentity??eG.checkServerIdentity,ciphers:r.ciphers,honorCipherOrder:r.honorCipherOrder,minVersion:r.minVersion,maxVersion:r.maxVersion,sigalgs:r.signatureAlgorithms,sessionTimeout:r.tlsSessionLifetime,dhparam:r.dhparam,ecdhCurve:r.ecdhCurve,crl:r.certificateRevocationLists,lookup:t.dnsLookup??t.dnsCache?.lookup,family:t.dnsLookupIpVersion,agent:e,setHost:t.setHost,method:t.method,maxHeaderSize:t.maxHeaderSize,localAddress:t.localAddress,headers:t.headers,createConnection:t.createConnection,timeout:t.http2?tu(t):void 0,h2session:t.h2session}}getRequestFunction(){let e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){let e=this._internals.url;if(e){if("https:"===e.protocol){if(this._internals.http2){if(ti<15||15===ti&&to<10){let e=Error("To use the `http2` option, install Node.js 15.10.0 or above");throw e.code="EUNSUPPORTED",e}return tr.auto}return eJ.request}return J.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}}let tf=e=>{let{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||304===t};class tm extends I{constructor(e,t){let{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}let ty=(e,t,r,s)=>{let{rawBody:i}=e;try{if("text"===t)return i.toString(s);if("json"===t)return 0===i.length?"":r(i.toString(s));if("buffer"===t)return i}catch(t){throw new tm(t,e)}throw new tm({message:`Unknown body type '${t}'`,name:"Error"},e)};function tg(e){return"unix:"===e.protocol||"unix"===e.hostname}let{buffer:tb}=ei,t_=u.string(F.versions.brotli),tv=new Set(["GET","HEAD"]),tw=new eW,tS=new Set([300,301,302,303,304,307,308]),tE=["socket","connect","continue","information","upgrade"],tx=()=>{};class tk extends V.Duplex{constructor(e,t,r){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=tx,this._triggerRead=!1,this._cancelTimeouts=tx,this._removeListeners=tx,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=tx,this.on("pipe",e=>{e?.headers&&Object.assign(this.options.headers,e.headers)}),this.on("newListener",e=>{if("retry"===e&&this.listenerCount("retry")>0)throw Error("A retry listener has been attached already.")});try{if(this.options=new tp(e,t,r),!this.options.url){if(""===this.options.prefixUrl)throw TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(t){let{options:e}=t;e&&(this.options=e),this.flush=async()=>{this.flush=async()=>{},this.destroy(t)};return}let{body:s}=this.options;if(u.nodeStream(s)&&s.once("error",e=>{this._flushed?this._beforeError(new U(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new U(e,this))}}),this.options.signal){let e=()=>{this.destroy(new B(this))};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal.removeEventListener("abort",e)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:t,options:r}=this,s=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof I||(e=new I(e.message,e,this));let i=e;(async()=>{if(t?.readable&&!t.rawBody&&!this._request?.socket?.destroyed&&(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let o;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now())<=0&&(e=1):e*=1e3);let n=r.retry;o=await n.calculateDelay({attemptCount:s,retryOptions:n,error:i,retryAfter:e,computedValue:eV({attemptCount:s,retryOptions:n,error:i,retryAfter:e,computedValue:n.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){this._error(new I(e.message,e,this));return}if(o){if(await new Promise(e=>{let t=setTimeout(e,o);this._stopRetry=()=>{clearTimeout(t),e()}}),this.destroyed)return;try{for(let e of this.options.hooks.beforeRetry)await e(i,this.retryCount+1)}catch(t){this._error(new I(t.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,e=>{let t=new tk(r.url,e,r);return t.retryCount=this.retryCount+1,F.nextTick(()=>{t.flush()}),t});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;let e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){let s=()=>{this._writeRequest(e,t,r)};this._requestInitialized?s():this._jobs.push(s)}_final(e){let t=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(t=>{this._request._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(t))})};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){let{body:e}=this.options;u.nodeStream(e)&&e.destroy()}this._request&&this._request.destroy(),null===e||u.undefined(e)||e instanceof I||(e=new I(e.message,e,this)),t(e)}pipe(e,t){return e instanceof J.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof J.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:t}=e,r=!u.undefined(e.form),s=!u.undefined(e.json),i=!u.undefined(e.body),o=tv.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=o,r||s||i){if(o)throw TypeError(`The \`${e.method}\` method cannot be used with a body`);let s=!u.string(t["content-type"]);if(i){if(ev(e.body)){let r=new eL(e.body);s&&(t["content-type"]=r.headers["Content-Type"]),"Content-Length"in r.headers&&(t["content-length"]=r.headers["Content-Length"]),e.body=r.encode()}e$(e.body)&&s&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(r){s&&(t["content-type"]="application/x-www-form-urlencoded");let{form:r}=e;e.form=void 0,e.body=new G.URLSearchParams(r).toString()}else{s&&(t["content-type"]="application/json");let{json:r}=e;e.json=void 0,e.body=e.stringifyJson(r)}let n=await eU(e.body,e.headers);u.undefined(t["content-length"])&&u.undefined(t["transfer-encoding"])&&!o&&!u.undefined(n)&&(t["content-length"]=String(n))}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:t}=this,{url:r}=t;this._nativeResponse=e,t.decompress&&(e=eb(e));let s=e.statusCode,i=e;i.statusMessage=i.statusMessage??J.STATUS_CODES[s],i.url=t.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirectUrls,i.request=this,i.isFromCache=this._nativeResponse.fromCache??!1,i.ip=this.ip,i.retryCount=this.retryCount,i.ok=tf(i),this._isFromCache=i.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=i,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",t=>{this._aborted=!0,e.destroy(),this._beforeError(new D(t,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new D({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=e.headers["set-cookie"];if(u.object(t.cookieJar)&&o){let e=o.map(async e=>t.cookieJar.setCookie(e,r.toString()));t.ignoreInvalidCookies&&(e=e.map(async e=>{try{await e}catch{}}));try{await Promise.all(e)}catch(e){this._beforeError(e);return}}if(!this.isAborted){if(t.followRedirect&&e.headers.location&&tS.has(s)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects){this._beforeError(new L(this));return}this._request=void 0;let o=new tp(void 0,void 0,this.options),n=303===s&&"GET"!==o.method&&"HEAD"!==o.method,a=307!==s&&308!==s,h=o.methodRewriting&&a;(n||h)&&(o.method="GET",o.body=void 0,o.json=void 0,o.form=void 0,delete o.headers["content-length"]);try{let t=W.Buffer.from(e.headers.location,"binary").toString(),s=new G.URL(t,r);if(!tg(r)&&tg(s)){this._beforeError(new I("Cannot redirect to UNIX socket",{},this));return}for(let e of(s.hostname!==r.hostname||s.port!==r.port?("host"in o.headers&&delete o.headers.host,"cookie"in o.headers&&delete o.headers.cookie,"authorization"in o.headers&&delete o.headers.authorization,(o.username||o.password)&&(o.username="",o.password="")):(s.username=o.username,s.password=o.password),this.redirectUrls.push(s),o.prefixUrl="",o.url=s,o.hooks.beforeRedirect))await e(o,i);this.emit("redirect",o,i),this.options=o,await this._makeRequest()}catch(e){this._beforeError(e)}return}if(t.isStream&&t.throwHttpErrors&&!tf(i)){this._beforeError(new N(i));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}for(let r of(this.emit("response",e),this._pipedServerResponses))if(!r.headersSent){for(let s in e.headers){let i=!t.decompress||"content-encoding"!==s,o=e.headers[s];i&&r.setHeader(s,o)}r.statusCode=s}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let t=await tb(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){let{options:t}=this,{timeout:r,url:s}=t;X(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=function(e,t,r){if(eM in e)return eB;e[eM]=!0;let s=[],{once:i,unhandleAll:o}=function(){let e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(let t of e){let{origin:e,event:r,fn:s}=t;e.removeListener(r,s)}e.length=0}}}(),n=(e,t,r)=>{let i=setTimeout(t,e,e,r);i.unref?.();let o=()=>{clearTimeout(i)};return s.push(o),o},{host:a,hostname:h}=r,l=(t,r)=>{e.destroy(new eF(t,r))},c=()=>{for(let e of s)e();o()};if(e.once("error",t=>{if(c(),0===e.listenerCount("error"))throw t}),void 0!==t.request){let r=n(t.request,l,"request");i(e,"response",e=>{i(e,"end",r)})}if(void 0!==t.socket){let{socket:r}=t,i=()=>{l(r,"socket")};e.setTimeout(r,i),s.push(()=>{e.removeListener("timeout",i)})}let u=void 0!==t.lookup,d=void 0!==t.connect,p=void 0!==t.secureConnect,f=void 0!==t.send;return(u||d||p||f)&&i(e,"socket",s=>{let{socketPath:o}=e;if(s.connecting){let e=!!(o??0!==eD.isIP(h??a??""));if(u&&!e&&void 0===s.address().address&&i(s,"lookup",n(t.lookup,l,"lookup")),d){let r=()=>n(t.connect,l,"connect");e?i(s,"connect",r()):i(s,"lookup",e=>{null===e&&i(s,"connect",r())})}p&&"https:"===r.protocol&&i(s,"connect",()=>{i(s,"secureConnect",n(t.secureConnect,l,"secureConnect"))})}if(f){let r=()=>n(t.send,l,"send");s.connecting?i(s,"connect",()=>{i(e,"upload-complete",r())}):i(e,"upload-complete",r())}}),void 0!==t.response&&i(e,"upload-complete",()=>{i(e,"response",n(t.response,l,"response"))}),void 0!==t.read&&i(e,"response",e=>{i(e,"end",n(t.read,l,"read"))}),c}(e,r,s);let i=t.cache?"cacheableResponse":"response";e.once(i,e=>{this._onResponse(e)}),e.once("error",t=>{this._aborted=!0,e.destroy(),t=t instanceof eF?new z(t,this.timings,this):new I(t.message,t,this),this._beforeError(t)}),this._unproxyEvents=ez(e,this,tE),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((t,r)=>{super.write(e,e=>{if(e){r(e);return}t()})})}_sendBody(){let{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;u.nodeStream(e)?e.pipe(t):u.generator(e)||u.asyncGenerator(e)?(async()=>{try{for await(let t of e)await this._asyncWrite(t);super.end()}catch(e){this._beforeError(e)}})():u.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,()=>{}),t.end())}_prepareCache(e){if(!tw.has(e)){let t=new ed((e,t)=>{let r=e._request(e,t);return u.promise(r)&&(r.once=(e,t)=>{if("error"===e)(async()=>{try{await r}catch(e){t(e)}})();else if("abort"===e)(async()=>{try{(await r).once("abort",t)}catch{}})();else throw Error(`Unknown HTTP2 promise event: ${e}`);return r}),r},e);tw.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise((r,s)=>{let i;Object.assign(t,function(e){let t={protocol:e.protocol,hostname:u.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return u.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}(e));let o=tw.get(t.cache)(t,async e=>{if(e._readableState.autoDestroy=!1,i){let t=()=>{e.req&&(e.complete=e.req.res.complete)};e.prependOnceListener("end",t),t(),(await i).emit("cacheableResponse",e)}r(e)});o.once("error",s),o.once("request",async e=>{r(i=e)})})}async _makeRequest(){let e;let{options:t}=this,{headers:r,username:s,password:i}=t,o=t.cookieJar;for(let e in r)if(u.undefined(r[e]))delete r[e];else if(u.null_(r[e]))throw TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(t.decompress&&u.undefined(r["accept-encoding"])&&(r["accept-encoding"]=t_?"gzip, deflate, br":"gzip, deflate"),s||i){let e=W.Buffer.from(`${s}:${i}`).toString("base64");r.authorization=`Basic ${e}`}if(o){let e=await o.getCookieString(t.url.toString());u.nonEmptyString(e)&&(r.cookie=e)}for(let r of(t.prefixUrl="",t.hooks.beforeRequest)){let s=await r(t);if(!u.undefined(s)){e=()=>s;break}}e||(e=t.getRequestFunction());let n=t.url;this._requestOptions=t.createNativeRequestOptions(),t.cache&&(this._requestOptions._request=e,this._requestOptions.cache=t.cache,this._requestOptions.body=t.body,this._prepareCache(t.cache));let a=t.cache?this._createCacheableRequest:e;try{var h;let e=a(n,this._requestOptions);(u.promise(e)&&(e=await e),u.undefined(e)&&(e=t.getFallbackRequestFunction()(n,this._requestOptions),u.promise(e)&&(e=await e)),(h=e).writable&&!h.writableEnded)?this._onRequest(e):this.writable?(this.once("finish",()=>{this._onResponse(e)}),this._sendBody()):this._onResponse(e)}catch(e){if(e instanceof eu)throw new $(e,this);throw e}}async _error(e){try{if(e instanceof N&&!this.options.throwHttpErrors);else for(let t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new I(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,r){this._request&&!this._request.destroyed&&this._request.write(e,t,s=>{if(!s&&!this._request.destroyed){this._uploadedSize+=W.Buffer.byteLength(e,t);let r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)}r(s)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){return{percent:this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){return{percent:this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class tO extends I{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}let tC=["request","response","redirect","uploadProgress","downloadProgress"];function tR(e){let t,r,s;let i=new A.EventEmitter,o=new H((n,a,h)=>{h(()=>{t.destroy()}),h.shouldReject=!1,h(()=>{a(new tO(t))});let l=c=>{h(()=>{});let d=e??new tk(void 0,void 0,s);d.retryCount=c,d._noPipe=!0,t=d,d.once("response",async e=>{let t=(e.headers["content-encoding"]??"").toLowerCase(),{options:s}=d;if("gzip"!==t&&"deflate"!==t&&"br"!==t||s.decompress)try{e.body=ty(e,s.responseType,s.parseJson,s.encoding)}catch(t){if(e.body=e.rawBody.toString(),tf(e)){d._beforeError(t);return}}else e.body=e.rawBody;try{for(let[t,r]of s.hooks.afterResponse.entries())if(e=await r(e,async e=>{throw s.merge(e),s.prefixUrl="",e.url&&(s.url=e.url),s.hooks.afterResponse=s.hooks.afterResponse.slice(0,t),new M(d)}),!(u.object(e)&&u.number(e.statusCode)&&!u.nullOrUndefined(e.body)))throw TypeError("The `afterResponse` hook returned an invalid value")}catch(e){d._beforeError(e);return}if(r=e,!tf(e)){d._beforeError(new N(e));return}d.destroy(),n(d.options.resolveBodyOnly?e.body:e)});let p=e=>{if(o.isCanceled)return;let{options:t}=d;if(e instanceof N&&!t.throwHttpErrors){let{response:t}=e;d.destroy(),n(d.options.resolveBodyOnly?t.body:t);return}a(e)};d.once("error",p);let f=d.options?.body;d.once("retry",(t,r)=>{e=void 0;let i=d.options.body;if(f===i&&u.nodeStream(i)){r.message="Cannot retry with consumed body stream",p(r);return}s=d.options,l(t)}),ez(d,i,tC),u.undefined(e)&&d.flush()};l(0)});o.on=(e,t)=>(i.on(e,t),o),o.off=(e,t)=>(i.off(e,t),o);let n=e=>{let t=(async()=>{await o;let{options:t}=r.request;return ty(r,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)),t};return o.json=()=>{if(t.options){let{headers:e}=t.options;t.writableFinished||"accept"in e||(e.accept="application/json")}return n("json")},o.buffer=()=>n("buffer"),o.text=()=>n("text"),o}let tP=async e=>new Promise(t=>{setTimeout(t,e)}),tT=e=>u.function_(e),tj=["get","post","put","patch","head","delete"],tA=e=>{e={options:new tp(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let t=(t,r,s=e.options)=>{let i;let o=new tk(t,r,s),n=e=>(o.options=e,o._noPipe=!e.isStream,o.flush(),e.isStream)?o:(i||(i=tR(o)),i),a=0,h=t=>{let r=(e.handlers[a++]??n)(t,h);if(u.promise(r)&&!o.options.isStream&&(i||(i=tR(o)),r!==i)){let e=Object.getOwnPropertyDescriptors(i);for(let t in e)t in r&&delete e[t];Object.defineProperties(r,e),r.cancel=i.cancel}return r};return h(o.options)};t.extend=(...t)=>{let r;let s=new tp(void 0,void 0,e.options),i=[...e.handlers];for(let e of t)tT(e)?(s.merge(e.defaults.options),i.push(...e.defaults.handlers),r=e.defaults.mutableDefaults):(s.merge(e),e.handlers&&i.push(...e.handlers),r=e.mutableDefaults);return tA({options:s,handlers:i,mutableDefaults:!!r})};let r=async function*(r,s){let i=new tp(r,s,e.options);i.resolveBodyOnly=!1;let{pagination:o}=i;v.function_(o.transform),v.function_(o.shouldContinue),v.function_(o.filter),v.function_(o.paginate),v.number(o.countLimit),v.number(o.requestLimit),v.number(o.backoff);let n=[],{countLimit:a}=o,h=0;for(;h<o.requestLimit;){0!==h&&await tP(o.backoff);let e=await t(void 0,void 0,i),r=await o.transform(e),s=[];for(let e of(v.array(r),r))if(o.filter({item:e,currentItems:s,allItems:n})&&(!o.shouldContinue({item:e,currentItems:s,allItems:n})||(yield e,o.stackAllItems&&n.push(e),s.push(e),--a<=0)))return;let l=o.paginate({response:e,currentItems:s,allItems:n});if(!1===l)return;l===e.request.options?i=e.request.options:(i.merge(l),v.any([u.urlInstance,u.undefined],l.url),void 0!==l.url&&(i.prefixUrl="",i.url=l.url)),h++}};for(let e of(t.paginate=r,t.paginate.all=async(e,t)=>{let s=[];for await(let i of r(e,t))s.push(i);return s},t.paginate.each=r,t.stream=(e,r)=>t(e,{...r,isStream:!0}),tj))t[e]=(r,s)=>t(r,{...s,method:e}),t.stream[e]=(r,s)=>t(r,{...s,method:e,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},tq=tA,tH=tq({options:new tp,handlers:[],mutableDefaults:!1}),tI=tH}};